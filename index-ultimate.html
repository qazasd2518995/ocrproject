<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æºæ­£å±±é‹¼ç´¢äº”é‡‘è¡Œ - çµ‚æ¥µ OCR è¾¨è­˜ç³»çµ±</title>
    <link rel="stylesheet" href="css/style-v2.css">
    <script src='https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <style>
        .api-status {
            background: #f0f8ff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .api-status h3 {
            margin-bottom: 10px;
            color: #333;
        }
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }
        .status-item {
            padding: 8px;
            background: white;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }
        .status-indicator.active {
            background: #4CAF50;
        }
        .status-indicator.limited {
            background: #ff9800;
        }
        .status-indicator.error {
            background: #f44336;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>æºæ­£å±±é‹¼ç´¢äº”é‡‘è¡Œ</h1>
            <h2>ğŸš€ çµ‚æ¥µ OCR è¾¨è­˜ç³»çµ±</h2>
            <p class="subtitle">æ•´åˆæ‰€æœ‰å¯ç”¨çš„å…è²» OCR æœå‹™ï¼Œæä¾›æœ€æº–ç¢ºçš„è¾¨è­˜çµæœ</p>
        </header>

        <!-- API ç‹€æ…‹é¡¯ç¤º -->
        <div class="api-status">
            <h3>ğŸ“Š OCR å¼•æ“ç‹€æ…‹</h3>
            <div class="status-grid">
                <div class="status-item">
                    <span class="status-indicator active"></span>
                    <span>Tesseract.js (æœ¬åœ°)</span>
                </div>
                <div class="status-item">
                    <span class="status-indicator active"></span>
                    <span>Tesseract å¢å¼·ç‰ˆ</span>
                </div>
                <div class="status-item">
                    <span class="status-indicator active"></span>
                    <span>OCR.space API</span>
                </div>
                <div class="status-item">
                    <span class="status-indicator active"></span>
                    <span>AI æ™ºèƒ½èåˆ</span>
                </div>
            </div>
        </div>

        <!-- ä¸Šå‚³å€åŸŸ -->
        <div class="upload-section">
            <div class="upload-area" id="uploadArea">
                <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="17 8 12 3 7 8"></polyline>
                    <line x1="12" y1="3" x2="12" y2="15"></line>
                </svg>
                <p class="upload-text">æ‹–æ”¾æª”æ¡ˆåˆ°æ­¤è™•æˆ–é»æ“Šé¸æ“‡</p>
                <p class="upload-hint">æ”¯æ´ JPGã€PNGã€PDF æ ¼å¼</p>
                <input type="file" id="fileInput" accept="image/*,.pdf,.heic" hidden>
            </div>
        </div>

        <!-- æ•´é«”é€²åº¦ -->
        <div class="overall-progress" id="overallProgress" style="display: none;">
            <h3>æ­£åœ¨è™•ç†...</h3>
            <div class="progress-container">
                <div class="engine-progress">
                    <span class="engine-name">Tesseract æ¨™æº–ç‰ˆ</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress1"></div>
                    </div>
                    <span class="status" id="status1">ç­‰å¾…ä¸­...</span>
                </div>
                <div class="engine-progress">
                    <span class="engine-name">Tesseract å¢å¼·ç‰ˆ</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress2"></div>
                    </div>
                    <span class="status" id="status2">ç­‰å¾…ä¸­...</span>
                </div>
                <div class="engine-progress">
                    <span class="engine-name">OCR.space API</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress3"></div>
                    </div>
                    <span class="status" id="status3">ç­‰å¾…ä¸­...</span>
                </div>
                <div class="engine-progress">
                    <span class="engine-name">AI æ™ºèƒ½èåˆ</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress4"></div>
                    </div>
                    <span class="status" id="status4">ç­‰å¾…ä¸­...</span>
                </div>
            </div>
        </div>

        <!-- åŸå§‹åœ–ç‰‡é è¦½ -->
        <div class="preview-section" id="previewSection" style="display: none;">
            <h3>åŸå§‹åœ–ç‰‡</h3>
            <div class="preview-container">
                <img id="previewImage" alt="é è¦½åœ–ç‰‡">
                <canvas id="pdfCanvas" style="display: none;"></canvas>
            </div>
        </div>

        <!-- å¤šå¼•æ“çµæœé¡¯ç¤º -->
        <div class="results-container" id="resultsContainer" style="display: none;">
            <h3>è¾¨è­˜çµæœæ¯”è¼ƒ</h3>
            
            <!-- å¿«é€Ÿæ“ä½œæŒ‰éˆ• -->
            <div class="quick-actions">
                <button class="btn btn-primary" onclick="showBestResult()">é¡¯ç¤ºæœ€ä½³çµæœ</button>
                <button class="btn btn-secondary" onclick="compareResults()">æ¯”è¼ƒå·®ç•°</button>
                <button class="btn btn-info" onclick="mergeResults()">åˆä½µçµæœ</button>
            </div>

            <!-- æ¨™ç±¤å¼çµæœé¡¯ç¤º -->
            <div class="tabs">
                <button class="tab-btn active" onclick="showTab('tab1')">Tesseract æ¨™æº–</button>
                <button class="tab-btn" onclick="showTab('tab2')">Tesseract å¢å¼·</button>
                <button class="tab-btn" onclick="showTab('tab3')">OCR.space API</button>
                <button class="tab-btn" onclick="showTab('tab4')">AI æ™ºèƒ½èåˆ</button>
            </div>

            <!-- å„å¼•æ“çµæœ -->
            <div class="tab-content" id="tab1">
                <div class="result-header">
                    <h4>Tesseract æ¨™æº–ç‰ˆ</h4>
                    <div class="result-stats">
                        <span class="confidence" id="confidence1">ä¿¡å¿ƒåº¦: --</span>
                        <span class="time" id="time1">è™•ç†æ™‚é–“: --</span>
                    </div>
                </div>
                <div class="result-actions">
                    <button class="btn-small" onclick="selectText('result1')">å…¨é¸</button>
                    <button class="btn-small" onclick="copyText('result1')">è¤‡è£½</button>
                    <button class="btn-small" onclick="downloadText('result1', 'tesseract-standard')">ä¸‹è¼‰</button>
                </div>
                <div class="result-text" id="result1" contenteditable="true" spellcheck="false">
                    ç­‰å¾…è¾¨è­˜...
                </div>
            </div>

            <div class="tab-content" id="tab2" style="display: none;">
                <div class="result-header">
                    <h4>Tesseract å¢å¼·ç‰ˆ</h4>
                    <div class="result-stats">
                        <span class="confidence" id="confidence2">ä¿¡å¿ƒåº¦: --</span>
                        <span class="time" id="time2">è™•ç†æ™‚é–“: --</span>
                    </div>
                </div>
                <div class="result-actions">
                    <button class="btn-small" onclick="selectText('result2')">å…¨é¸</button>
                    <button class="btn-small" onclick="copyText('result2')">è¤‡è£½</button>
                    <button class="btn-small" onclick="downloadText('result2', 'tesseract-enhanced')">ä¸‹è¼‰</button>
                </div>
                <div class="result-text" id="result2" contenteditable="true" spellcheck="false">
                    ç­‰å¾…è¾¨è­˜...
                </div>
            </div>

            <div class="tab-content" id="tab3" style="display: none;">
                <div class="result-header">
                    <h4>OCR.space API</h4>
                    <div class="result-stats">
                        <span class="confidence" id="confidence3">ä¿¡å¿ƒåº¦: --</span>
                        <span class="time" id="time3">è™•ç†æ™‚é–“: --</span>
                    </div>
                </div>
                <div class="result-actions">
                    <button class="btn-small" onclick="selectText('result3')">å…¨é¸</button>
                    <button class="btn-small" onclick="copyText('result3')">è¤‡è£½</button>
                    <button class="btn-small" onclick="downloadText('result3', 'ocr-space')">ä¸‹è¼‰</button>
                </div>
                <div class="result-text" id="result3" contenteditable="true" spellcheck="false">
                    ç­‰å¾…è¾¨è­˜...
                </div>
            </div>

            <div class="tab-content" id="tab4" style="display: none;">
                <div class="result-header">
                    <h4>AI æ™ºèƒ½èåˆçµæœ</h4>
                    <div class="result-stats">
                        <span class="confidence" id="confidence4">ä¿¡å¿ƒåº¦: --</span>
                        <span class="time" id="time4">è™•ç†æ™‚é–“: --</span>
                    </div>
                </div>
                <div class="ai-info">
                    <p>ğŸ¤– AI åˆ†æäº†æ‰€æœ‰å¼•æ“çš„çµæœï¼Œæ™ºèƒ½é¸æ“‡æœ€æº–ç¢ºçš„æ–‡å­—</p>
                </div>
                <div class="result-actions">
                    <button class="btn-small" onclick="selectText('result4')">å…¨é¸</button>
                    <button class="btn-small" onclick="copyText('result4')">è¤‡è£½</button>
                    <button class="btn-small" onclick="downloadText('result4', 'ai-fusion')">ä¸‹è¼‰</button>
                </div>
                <div class="result-text" id="result4" contenteditable="true" spellcheck="false">
                    ç­‰å¾…è¾¨è­˜...
                </div>
            </div>
        </div>

        <!-- é‡æ–°ä¸Šå‚³æŒ‰éˆ• -->
        <button class="btn btn-reset" id="resetBtn" style="display: none;" onclick="resetAll()">
            é‡æ–°ä¸Šå‚³
        </button>
    </div>

    <!-- Toast é€šçŸ¥ -->
    <div class="toast" id="toast"></div>

    <!-- ä½¿ç”¨å·²ç¶“ç©©å®šå¯ç”¨çš„ multi-ocr.js -->
    <script>
        // ç›´æ¥ä½¿ç”¨å·²ç¶“æ¸¬è©¦éå¯ç”¨çš„é…ç½®
        const OCR_SPACE_API_KEY = 'K87802744288957';
        
        // é‡ç”¨ multi-ocr.js çš„ç¨‹å¼ç¢¼ï¼Œä½†åªä¿ç•™å¯ç”¨çš„å¼•æ“
    </script>
    <script src="js/multi-ocr.js"></script>
</body>
</html>